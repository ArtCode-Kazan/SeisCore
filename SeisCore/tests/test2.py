import numpy as np
from SeisCore.HydroFracCore.CalcFunctions.MomentsSelection import \
    calc_correlation_array as cca

signal_1 = [-317, -222, -777, -935, 286, 0, 556, -600, 982, 505, 735, -218,
            -32, 960, -176, -948, 142, 981, -501, 672, 249, 598, -633, 218,
            -440, 827, 169, 612, 923, -154, -77, 4, 670, 165, -149, -203, -316,
            -850, 650, 152, 142, 490, 757, -937, 877, 478, -548, 553, 690,
            -937, 762, 582, -149, 634, -857, -951, 242, -978, -795, 303, 461,
            898, -495, -283, 730, -789, -580, -7, 667, 744, 852, -95, -10,
            -269, -505, 134, 237, 957, 832, 204, -280, 77, 113, 237, 13, 853,
            -623, 538, 984, -887, 676, 861, 654, 588, -540, -649, 462, 140,
            -693, -783, -495, -154, 607, 746, -953, 133, -419, 478, 502, 750,
            -964, -575, -684, 1, 706, 822, -282, -536, 798, -488, 621, 105,
            882, -408, 899, -350, -233, 123, 913, 309, -790, 559, 942, -13,
            287, -488, -327, 111, 245, -16, 272, 621, -280, 780, 321, 744, 425,
            -729, 234, 543, 725, -37, -462, 777, -431, 506, 283, -248, 214,
            -213, 755, -70, 892, -25, -421, 116, 416, -439, -615, -647, 947,
            -372, -92, 482, -92, 193, 49, -979, -150, 850, 323, -336, -928,
            -938, -162, 250, 643, 533, -125, -136, 729, -659, -354, 546, 95,
            848, 358, -388, 247, 533, -218, -571, -304, 470, 655, -381, 100,
            -470, 842, -780, 896, 101, -504, 13, -683, 48, 839, -993, 675, 677,
            822, -876, 21, 841, 634, -971, 429, -823, -119, 62, -102, -646,
            312, 954, -939, -633, 242, 44, 623, 938, 909, 800, 563, 582, -103,
            -28, -140, -152, -87, 140, -208, -973, -724, -48, 102, -629, -224,
            956, -869, 190, 434, -936, -204, -612, -220, 599, 243, 304, 822,
            -926, 14, -161, -685, -95, -212, -118, 364, -211, 662, 940, -108,
            -752, -344, -621, 830, 483, 842, 382, 583, 380, 451, 664, -980,
            616, -591, 542, -737, 477, -570, 423]

signal_2 = [-554, -420, -815, -901, 498, -56, 559, -858, 1059, 603, 687, -60,
            -14, 893, -404, -724, -27, 820, -350, 691, 415, 743, -592, -10,
            -667, 832, 254, 479, 751, -208, 34, 296, 395, 90, -444, -187, -153,
            -950, 509, 124, 63, 619, 961, -1179, 743, 285, -351, 345, 570,
            -704, 533, 428, -68, 743, -915, -826, 283, -778, -955, 299, 690,
            1133, -284, -445, 652, -766, -521, -300, 900, 782, 1146, -116,
            -178, -361, -430, 308, 126, 887, 725, 490, -277, -162, 376, 403,
            -257, 895, -877, 692, 1242, -972, 467, 1059, 607, 882, -305, -943,
            512, 314, -966, -994, -770, -33, 682, 722, -824, 420, -694, 285,
            537, 915, -954, -447, -762, 56, 909, 736, -191, -758, 1034, -336,
            640, 104, 944, -216, 769, -425, -250, 144, 860, 491, -909, 508,
            868, -268, 257, -507, -47, 178, 147, 96, 461, 817, -207, 1030, 134,
            625, 291, -807, 177, 519, 472, 244, -346, 834, -533, 400, 530, 41,
            513, -494, 474, 101, 1155, 79, -395, 89, 471, -261, -419, -398,
            669, -616, -172, 449, 35, 190, 126, -728, -56, 579, 299, -427,
            -1137, -1163, -275, 535, 649, 374, 30, 63, 527, -799, -591, 424,
            323, 1119, 82, -672, 407, 737, -446, -429, -425, 295, 566, -319,
            67, -683, 1114, -1021, 841, -151, -585, 305, -446, -208, 814, -772,
            419, 599, 722, -1024, 289, 697, 624, -870, 249, -1019, -48, -84,
            154, -519, 253, 1145, -857, -920, 510, -100, 745, 688, 907, 1056,
            451, 440, 117, 208, 160, 143, -379, 400, -33, -741, -901, 85, -146,
            -582, -377, 920, -1020, 375, 569, -1192, 33, -767, -194, 578, 29,
            525, 665, -943, -27, 3, -716, -283, -298, -150, 467, -226, 483,
            1180, 108, -906, -517, -638, 606, 715, 1085, 347, 843, 202, 311,
            410, -749, 822, -548, 597, -773, 487, -595, 418]

signal_2 = signal_1

window_size = 10
d_step_min = -2
d_step_max = 2

signal_1 = np.asarray(signal_1)
signal_2 = np.asarray(signal_2)

res = cca(signal_1, signal_2, window_size, d_step_min, d_step_max)

np.savetxt(r'D:/TEMP/signal1.dat',X=signal_1,fmt='%i',delimiter='\t')
np.savetxt(r'D:/TEMP/signal2.dat',X=signal_1,fmt='%i',delimiter='\t')
np.savetxt(r'D:/TEMP/res.dat',X=res,fmt='%f',delimiter='\t')

print(res.shape)
for el in range(20):
    print(res[el])
